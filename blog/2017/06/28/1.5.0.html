<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Prettier 1.5: GraphQL, CSS-in-JS &amp; JSON · Prettier</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This release adds GraphQL formatting support, CSS-in-JS (including styled-components), and JSON support to Prettier."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Prettier 1.5: GraphQL, CSS-in-JS &amp; JSON · Prettier"/><meta property="og:type" content="website"/><meta property="og:url" content="https://prettier.io/blog/2017/06/28/1.5.0.html"/><meta property="og:description" content="This release adds GraphQL formatting support, CSS-in-JS (including styled-components), and JSON support to Prettier."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/icon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://prettier.io/blog/atom.xml" title="Prettier Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://prettier.io/blog/feed.xml" title="Prettier Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-111350464-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="//unpkg.com/@sandhose/prettier-animated-logo@1.0.3/dist/wide.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/icon.png" alt="Prettier"/><h2 class="headerTitleWithLogo">Prettier</h2></a><a href="/versions.html"><h3>stable</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/playground/" target="_self">Playground</a></li><li class=""><a href="/docs/en/index.html" target="_self">About</a></li><li class=""><a href="/docs/en/install.html" target="_self">Usage</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/prettier/prettier" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/blog/2019/01/20/1.16.0.html">Prettier 1.16: HTML improvements and better CRLF handling</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/11/07/1.15.0.html">Prettier 1.15: HTML, Vue, Angular and MDX Support</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/07/29/1.14.0.html">Prettier 1.14: YAML Support</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/05/27/1.13.0.html">Prettier 1.13: Conquering the web!</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/04/11/1.12.0.html">Prettier 1.12: Fixes, Features, and Formatting, Oh My!</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2017/06/28/1.5.0.html">Prettier 1.5: GraphQL, CSS-in-JS &amp; JSON</a></h1><p class="post-meta">June 28, 2017</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/vjeux" target="_blank" rel="noreferrer noopener">Christopher Chedeau (@vjeux)</a></p></div></header><div><span><p>This release adds GraphQL formatting support, CSS-in-JS (including styled-components), and JSON support to Prettier.</p>
<!--truncate-->
<p>This is the release I've been waiting for a very long time: one that has only minimal changes to JavaScript!</p>
<p>For the past 6 months, we kept doing changes to various aspects of printing JavaScript, with the hope that one day we would get to a stable place. No automated tool is going to print perfect code for all the possible edge cases. The goal is to find a good place where when people report code that is printed in a funny way, we can't make it better without making other pieces of code look worse, introduce behavior that's very hard to understand for humans and doesn't introduce some disproportionate complexity to the codebase.</p>
<p>We're not 100% there yet, but we're closer than ever!</p>
<p>Now that JavaScript needs for support is trending down, it's an opportunity to support other languages that front-end developers are working on and want formatted. We've introduced TypeScript and CSS in the last release and are doing a batch of fixes for them in this release. We're also adding support for new languages: GraphQL queries, embedding CSS-in-JS and JSON are now available in prettier!</p>
<h4><a class="anchor" aria-hidden="true" id="blog-post-adding-a-new-layout-strategy-to-prettier-https-mediumcom-geckoboard-under-the-hood-adding-a-new-layout-strategy-to-prettier-8d33084c0f99-by-karl-https-githubcom-karl"></a><a href="#blog-post-adding-a-new-layout-strategy-to-prettier-https-mediumcom-geckoboard-under-the-hood-adding-a-new-layout-strategy-to-prettier-8d33084c0f99-by-karl-https-githubcom-karl" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Blog Post: <a href="https://medium.com/geckoboard-under-the-hood/adding-a-new-layout-strategy-to-prettier-8d33084c0f99">Adding a new layout strategy to Prettier</a> by <a href="https://github.com/karl">@karl</a></h4>
<p>Prettier is not only a useful tool but it's also a really cool piece of technology. <a href="https://github.com/karl">@karl</a> spent a bunch of time improving JSX support and in the process implemented a new primitive to prettier: <code>fill</code>. He wrote a very interesting blog post <a href="https://medium.com/geckoboard-under-the-hood/adding-a-new-layout-strategy-to-prettier-8d33084c0f99">Adding a new layout strategy to Prettier</a> that I highly recommend reading if you're interested in how prettier is working behind the scenes.</p>
<h3><a class="anchor" aria-hidden="true" id="graphql"></a><a href="#graphql" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GraphQL</h3>
<p>Thanks to <a href="https://github.com/stubailo">@stubailo</a>, <a href="https://github.com/jnwng">@jnwng</a>, <a href="https://github.com/tgriesser">@tgriesser</a> and <a href="https://github.com/azz">@azz</a>, prettier now supports printing GraphQL queries!</p>
<p>It works for <code>.graphql</code> files and within JavaScipt templates that start with <code>graphql</code>, <code>graphql.experimental</code> and <code>gql</code> in order to work with <a href="https://facebook.github.io/relay/">Relay</a> and <a href="https://www.apollodata.com/">Apollo</a>.</p>
<pre><code class="hljs css language-jsx">ReactDOM.render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">QueryRenderer</span>
    <span class="hljs-attr">query</span>=<span class="hljs-string">{graphql</span>`
      <span class="hljs-attr">query</span> <span class="hljs-attr">appQuery</span> {
        <span class="hljs-attr">viewer</span> {
          <span class="hljs-attr">...TodoApp_viewer</span>
        }
      }
    `}
    // <span class="hljs-attr">...</span>
  /&gt;</span>,
  mountNode
);
</span></code></pre>
<p>Note that it only supports the open source syntax of GraphQL, therefore doesn't work with Relay Classic, it only works with Relay Modern.</p>
<h3><a class="anchor" aria-hidden="true" id="css-in-js"></a><a href="#css-in-js" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS-in-JS</h3>
<p>If you are using <a href="https://github.com/styled-components/styled-components">styled-components</a> or <a href="https://github.com/zeit/styled-jsx">styled-jsx</a>, prettier will now reformat the CSS inside of your template expressions. Thanks to <a href="https://github.com/pomber">@pomber</a> for the awesome work!</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> EqualDivider = styled.div<span class="hljs-string">`
  margin: 0.5rem;
  padding: 1rem;
  background: papayawhip;
  &gt; * {
    flex: 1;
    &amp;:not(:first-child) {
      <span class="hljs-subst">${props =&gt; (props.vertical ? <span class="hljs-string">"margin-top"</span> : <span class="hljs-string">"margin-left"</span>)}</span>: 1rem;
    }
  }
`</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="json"></a><a href="#json" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSON</h3>
<p>This was pretty straightforward to implement but nonetheless very useful. Thanks to <a href="https://github.com/josephfrazier">@josephfrazier</a> for doing it :)</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"prettier"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.5.0"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Prettier is an opinionated JavaScript formatter"</span>,
  <span class="hljs-attr">"bin"</span>: {
    <span class="hljs-attr">"prettier"</span>: <span class="hljs-string">"./bin/prettier.js"</span>
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="css"></a><a href="#css" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS</h3>
<p>I'm really excited because we only put a few days to build the initial CSS support and it has worked surprisingly well. This release brings a handful of important improvements to CSS but nothing that required big changes.</p>
<h4><a class="anchor" aria-hidden="true" id="css-every-selector-is-now-printed-in-its-own-line-2047-https-githubcom-prettier-prettier-pull-2047-by-yuchi-https-githubcom-yuchi"></a><a href="#css-every-selector-is-now-printed-in-its-own-line-2047-https-githubcom-prettier-prettier-pull-2047-by-yuchi-https-githubcom-yuchi" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: Every selector is now printed in its own line (<a href="https://github.com/prettier/prettier/pull/2047">#2047</a>) by <a href="https://github.com/yuchi">@yuchi</a></h4>
<p>The biggest unknown when printing CSS was how to deal with multiple selectors. The initial approach we took was to use the 80 columns rule where we would only split if it was bigger than that. Many people reported that they were using another strategy for this: always break after a <code>,</code>. It turns out that many popular codebases are using this approach and it feels good as you can see the structure of the selectors when layed out on-top of each others.</p>
<pre><code class="hljs css language-css">// Before
.clusterPlannerDialog input[type="text"], .clusterPlannerDialog .uiTypeahead {
  color: #333;
}

// After
.clusterPlannerDialog input[type="text"],
.clusterPlannerDialog .uiTypeahead {
  color: #333;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-lowercase-hex-colors-2203-https-githubcom-prettier-prettier-pull-2203-by-azz-https-githubcom-azz"></a><a href="#css-lowercase-hex-colors-2203-https-githubcom-prettier-prettier-pull-2203-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: lowercase hex colors (<a href="https://github.com/prettier/prettier/pull/2203">#2203</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>The concept of code formatting has blurry boundaries. The core aspect of it is around whitespaces but some things like single vs double quotes and semi-colons are usually bundled with it. With prettier on JavaScript, we also lightly reformat strings by removing extra <code>\</code> and normalize numbers. For CSS, we need to do a similar interpretation of where the boundary ends. For colors, we decided to turn all the letters into lowercase and stop there. Turning rgb() into hex or 6 hex into 3 hex is out of scope.</p>
<pre><code class="hljs css language-css">// Before
.foo {
  color: #AAA;
  -o-color: #fabcd3;
  -ms-color: #AABBCC;
}

// After
.foo {
  color: #aa;
  -o-color: #fabcd3;
  -ms-color: #aabbcc;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-use-fill-for-css-values-2224-https-githubcom-prettier-prettier-pull-2224"></a><a href="#css-use-fill-for-css-values-2224-https-githubcom-prettier-prettier-pull-2224" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: Use fill for CSS values (<a href="https://github.com/prettier/prettier/pull/2224">#2224</a>)</h4>
<p>The new fill primitive turned out to be very useful for CSS. For long values, instead of breaking and putting a <code>\n</code> before every element, we can instead only put a <code>\n</code> when it goes over the limit. It leads to much better looking code.</p>
<pre><code class="hljs css language-scss"><span class="hljs-comment">// Before</span>
foo {
  <span class="hljs-attribute">border-left</span>:
    <span class="hljs-number">1px</span>
    solid
    mix(<span class="hljs-variable">$warningBackgroundColors</span>, <span class="hljs-variable">$warningBorderColors</span>, <span class="hljs-number">50%</span>);
}

<span class="hljs-comment">// After</span>
foo {
  <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid
    mix(<span class="hljs-variable">$warningBackgroundColors</span>, <span class="hljs-variable">$warningBorderColors</span>, <span class="hljs-number">50%</span>);
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-allow-long-media-rules-to-break-2219-https-githubcom-prettier-prettier-pull-2219"></a><a href="#css-allow-long-media-rules-to-break-2219-https-githubcom-prettier-prettier-pull-2219" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: Allow long media rules to break (<a href="https://github.com/prettier/prettier/pull/2219">#2219</a>)</h4>
<p>This is another small fix in the journey of properly supporting a new language. We now encode the ability to break on long <code>@media</code> rules.</p>
<pre><code class="hljs css language-css">// Before
@media all and (-webkit-min-device-pixel-ratio: 1.5), all and (-o-min-device-pixel-ratio: 3/2), all and (min--moz-device-pixel-ratio: 1.5), all and (min-device-pixel-ratio: 1.5) {
}

// After
@media all and (-webkit-min-device-pixel-ratio: 1.5),
  all and (-o-min-device-pixel-ratio: 3/2),
  all and (min--moz-device-pixel-ratio: 1.5),
  all and (min-device-pixel-ratio: 1.5) {
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-print-else-on-same-line-as-2088-https-githubcom-prettier-prettier-pull-2088-by-azz-https-githubcom-azz"></a><a href="#css-print-else-on-same-line-as-2088-https-githubcom-prettier-prettier-pull-2088-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: Print @else on same line as } (<a href="https://github.com/prettier/prettier/pull/2088">#2088</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>Less and SCSS are turning into real programming languages :) Step by step, we're starting to print all their constructs in the same way as JavaScript. This time, it's the <code>else</code> placement.</p>
<pre><code class="hljs css language-scss"><span class="hljs-comment">// Before</span>
@<span class="hljs-keyword">if</span> <span class="hljs-variable">$media</span> == phonePortrait {
  <span class="hljs-variable">$k</span>: .<span class="hljs-number">15625</span>;
}
@<span class="hljs-keyword">else</span> if <span class="hljs-variable">$media</span> == tabletPortrait {
  <span class="hljs-variable">$k</span>: .<span class="hljs-number">065106</span>;
}

<span class="hljs-comment">// After</span>
@<span class="hljs-keyword">if</span> <span class="hljs-variable">$media</span> == phonePortrait {
  <span class="hljs-variable">$k</span>: .<span class="hljs-number">15625</span>;
} @<span class="hljs-keyword">else</span> if <span class="hljs-variable">$media</span> == tabletPortrait {
  <span class="hljs-variable">$k</span>: .<span class="hljs-number">065106</span>;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-implement-prettier-ignore-2089-https-githubcom-prettier-prettier-pull-2089-by-azz-https-githubcom-azz"></a><a href="#css-implement-prettier-ignore-2089-https-githubcom-prettier-prettier-pull-2089-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: implement prettier-ignore (<a href="https://github.com/prettier/prettier/pull/2089">#2089</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>While we want prettier to format the entire codebase, there are times where we &quot;know better&quot; and want an escape hatch. This is where the <code>prettier-ignore</code> comment comes in. It wasn't working for CSS but that was an oversight, now it is implemented :)</p>
<pre><code class="hljs css language-css">// Before
foo {
  /* prettier-ignore */
  thing: foo;
  -ms-thing: foo;
}

// After
foo {
  /* prettier-ignore */
  thing:     foo;
  -ms-thing: foo;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-fix-css-modules-composes-breaking-with-long-line-width-2190-https-githubcom-prettier-prettier-pull-2190-by-tdeekens-https-githubcom-tdeekens"></a><a href="#css-fix-css-modules-composes-breaking-with-long-line-width-2190-https-githubcom-prettier-prettier-pull-2190-by-tdeekens-https-githubcom-tdeekens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: Fix css-modules composes breaking with long line width (<a href="https://github.com/prettier/prettier/pull/2190">#2190</a>) by <a href="https://github.com/tdeekens">@tdeekens</a></h4>
<p>In order to be fast, many &quot;packagers&quot; do not parse files in order to extract dependencies but instead use a crude regex. This is a reason why we don't break long <code>require()</code> calls and it happens to also affect CSS Modules. If you add new lines in the <code>composes</code> field, it doesn't recognize it anymore. So we're no longer breaking it there, even if it goes over 80 columns.</p>
<pre><code class="hljs css language-css">// Before
.reference {
  composes:
    selector
    from
    "a/long/file/path/exceeding/the/maximum/length/forcing/a/line-wrap/file.css";
}

// After
.reference {
  composes: selector from "a/long/file/path/exceeding/the/maximum/length/forcing/a/line-wrap/file.css";
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="css-first-try-scss-when-there-s-an-import-https-githubcom-import-with-comma-2225-https-githubcom-prettier-prettier-pull-2225"></a><a href="#css-first-try-scss-when-there-s-an-import-https-githubcom-import-with-comma-2225-https-githubcom-prettier-prettier-pull-2225" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS: First try scss when there's an <a href="https://github.com/import">@import</a> with comma (<a href="https://github.com/prettier/prettier/pull/2225">#2225</a>)</h4>
<p>We made a decision to have only a single high level &quot;parser&quot; for CSS, SCSS and Less even though we are using <code>postcss-less</code> and <code>postcss-scss</code> under the hood. We use a regex to figure out which parser to try first and fallback to the other one if a syntax error is thrown. Unfortunately, for certain features, the first (incorrect) parser doesn't throw and instead skips some elements. So, we need to beef up the regex to make sure we are right for the early detection.</p>
<p>Thankfully, this hack is working well in practice. If we find a lot more edge cases, we'll likely want to do the right thing(tm) and split them into two parsers.</p>
<pre><code class="hljs css language-scss"><span class="hljs-comment">// Before</span>
@<span class="hljs-keyword">import</span> <span class="hljs-string">"text-shadow"</span>;

<span class="hljs-comment">// After</span>
@<span class="hljs-keyword">import</span> <span class="hljs-string">"rounded-corners"</span>, <span class="hljs-string">"text-shadow"</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="typescript"></a><a href="#typescript" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript</h3>
<p>TypeScript support is now solid, all the changes for this release are small edge cases.</p>
<h4><a class="anchor" aria-hidden="true" id="typescript-print-arrow-function-type-params-on-same-line-as-params-2101-https-githubcom-prettier-prettier-pull-2101-by-azz-https-githubcom-azz"></a><a href="#typescript-print-arrow-function-type-params-on-same-line-as-params-2101-https-githubcom-prettier-prettier-pull-2101-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: print arrow function type params on same line as params (<a href="https://github.com/prettier/prettier/pull/2101">#2101</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>The core algorithm of prettier is to expand a group if all the elements do not fit. It works really well in practice for most of JavaScript but there's one case it doesn't handle very well is when there are two groups side by side, in this case: <code>&lt;Generics&gt;(Arguments)</code>. We have to carefully create groups such that arguments expand first as this is generally what people expect.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> forwardS = R.curry(&lt;
  V,
  T
&gt;<span class="hljs-function">(<span class="hljs-params">prop: <span class="hljs-built_in">string</span>, reducer: ReducerFunction&lt;V, T&gt;, value: V, state: {[name: <span class="hljs-built_in">string</span>]: T}</span>) =&gt;</span>
  R.assoc(prop, reducer(value, state[prop]), state)
);

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> forwardS = R.curry(
  &lt;V, T&gt;(
    prop: <span class="hljs-built_in">string</span>,
    reducer: ReducerFunction&lt;V, T&gt;,
    value: V,
    state: { [name: <span class="hljs-built_in">string</span>]: T }
  ) =&gt; R.assoc(prop, reducer(value, state[prop]), state)
);
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-keep-parens-around-with-yield-await-non-null-assertion-2149-https-githubcom-prettier-prettier-pull-2149-by-azz-https-githubcom-azz"></a><a href="#typescript-keep-parens-around-with-yield-await-non-null-assertion-2149-https-githubcom-prettier-prettier-pull-2149-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: keep parens around with yield/await non-null assertion (<a href="https://github.com/prettier/prettier/pull/2149">#2149</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>For better or worse, we decided to manually handle adding parenthesis. So when a new operator is introduced, we need to make sure that we add correct parenthesis when nested with any other combination of operators. In this case, we missed await inside of TypeScript <code>!</code>.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">const</span> bar = <span class="hljs-keyword">await</span> foo(<span class="hljs-literal">false</span>)!;

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">const</span> bar = (<span class="hljs-keyword">await</span> foo(<span class="hljs-literal">false</span>))!;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-print-in-import-if-it-s-in-the-source-2150-https-githubcom-prettier-prettier-pull-2150-by-azz-https-githubcom-azz"></a><a href="#typescript-print-in-import-if-it-s-in-the-source-2150-https-githubcom-prettier-prettier-pull-2150-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: Print {} in import if it's in the source (<a href="https://github.com/prettier/prettier/pull/2150">#2150</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>We use typescript-eslint-parser project that translates TypeScript AST into estree AST in order for prettier to print it. From time to time we're going to find edge cases that it doesn't handle yet. In this case, it didn't give a way to tell that there's an empty <code>{}</code>, which apparently is important for TypeScript. Thankfully, the team is very responsive and they fixed it after we put a workaround inside of prettier.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@types/googlemaps"</span>;

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">import</span> {} <span class="hljs-keyword">from</span> <span class="hljs-string">"@types/googlemaps"</span>;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-always-break-interfaces-onto-multiple-lines-2161-https-githubcom-prettier-prettier-pull-2161-by-azz-https-githubcom-azz"></a><a href="#typescript-always-break-interfaces-onto-multiple-lines-2161-https-githubcom-prettier-prettier-pull-2161-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: Always break interfaces onto multiple lines (<a href="https://github.com/prettier/prettier/pull/2161">#2161</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>The code that implements <code>interface</code> is shared with the code that prints <code>object</code>s, which contains a rule to keep them expanded if there's a <code>\n</code> inside. But, this is not the intended behavior for interfaces. We always want to expand, like we do for classes, even if it fits 80 columns.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">interface</span> FooBar { [id: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">number</span>; }

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">interface</span> FooBar {
  [id: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">number</span>;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-fix-extra-semicolon-in-ambient-typescript-declaration-emit-2167-https-githubcom-prettier-prettier-pull-2167-by-azz-https-githubcom-azz"></a><a href="#typescript-fix-extra-semicolon-in-ambient-typescript-declaration-emit-2167-https-githubcom-prettier-prettier-pull-2167-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: Fix extra semicolon in ambient typescript declaration emit (<a href="https://github.com/prettier/prettier/pull/2167">#2167</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p><code>no-semi</code> and <code>semi</code> are often requested but on the prettier team we're one step ahead and implemented <code>two-semi</code> for you! Just kidding, it was a bug and is now fixed ;)</p>
<pre><code class="hljs css language-ts">// Before
declare module "classnames" {
  export default function classnames(
    ...inputs: (string | number | false | object | undefined)[]
  ): string;;
}

// After
declare module "classnames" {
  export default function classnames(
    ...inputs: (string | number | false | object | undefined)[]
  ): string;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-group-function-params-in-call-construct-signatures-2169-https-githubcom-prettier-prettier-pull-2169-by-azz-https-githubcom-azz"></a><a href="#typescript-group-function-params-in-call-construct-signatures-2169-https-githubcom-prettier-prettier-pull-2169-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: group function params in call/construct signatures (<a href="https://github.com/prettier/prettier/pull/2169">#2169</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>Adding a comment before a method used to take into account the comment length and would often expand the method when it wasn't expected. Thankfully, it was a simple fix, just wrap the output in a <code>group</code>.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">interface</span> TimerConstructor {
  <span class="hljs-comment">// Line-splitting comment</span>
  <span class="hljs-keyword">new</span> (
    interval: <span class="hljs-built_in">number</span>,
    callback: <span class="hljs-function">(<span class="hljs-params">handler: Timer</span>) =&gt;</span> <span class="hljs-built_in">void</span>
  ): Timer;
}

<span class="hljs-keyword">interface</span> TimerConstructor {
  <span class="hljs-comment">// Line-splitting comment</span>
  <span class="hljs-keyword">new</span> (interval: <span class="hljs-built_in">number</span>, callback: <span class="hljs-function">(<span class="hljs-params">handler: Timer</span>) =&gt;</span> <span class="hljs-built_in">void</span>): Timer;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-upgrade-tsep-2183-https-githubcom-prettier-prettier-pull-2183-by-azz-https-githubcom-azz"></a><a href="#typescript-upgrade-tsep-2183-https-githubcom-prettier-prettier-pull-2183-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: Upgrade tsep (<a href="https://github.com/prettier/prettier/pull/2183">#2183</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>This bug was very annoying if you ran into it: anytime you formatted the code, it would add one more <code>_</code> to the object key!</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
obj = {
  __: <span class="hljs-number">42</span>
  ___: <span class="hljs-number">42</span>
};

<span class="hljs-comment">// After</span>
obj = {
  _: <span class="hljs-number">42</span>
  __: <span class="hljs-number">42</span>
};
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-break-on-multiple-interface-extends-2085-https-githubcom-prettier-prettier-pull-2085-by-azz-https-githubcom-azz"></a><a href="#typescript-break-on-multiple-interface-extends-2085-https-githubcom-prettier-prettier-pull-2085-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: break on multiple interface extends (<a href="https://github.com/prettier/prettier/pull/2085">#2085</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>Unlike in JavaScript, TypeScript lets you extend multiple classes at once. It turns out that people use this feature and prettier now does a better job at printing it.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ThirdVeryLongAndBoringInterfaceName <span class="hljs-keyword">extends</span> AVeryLongAndBoringInterfaceName, AnotherVeryLongAndBoringInterfaceName, AThirdVeryLongAndBoringInterfaceName {}

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> ThirdVeryLongAndBoringInterfaceName
  <span class="hljs-keyword">extends</span> AVeryLongAndBoringInterfaceName,
    AnotherVeryLongAndBoringInterfaceName,
    AThirdVeryLongAndBoringInterfaceName {}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="typescript-handle-objectpattern-instead-of-objectexpression-inside-binaryexpression-2238-https-githubcom-prettier-prettier-pull-2238-by-azz-https-githubcom-azz"></a><a href="#typescript-handle-objectpattern-instead-of-objectexpression-inside-binaryexpression-2238-https-githubcom-prettier-prettier-pull-2238-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript: handle ObjectPattern instead of ObjectExpression inside BinaryExpression (<a href="https://github.com/prettier/prettier/pull/2238">#2238</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>This one isn't very interesting, it's an edge case that's not properly handled in the TypeScript -&gt; estree conversion.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
call(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> { bla: <span class="hljs-number">1</span> }) || [];

<span class="hljs-comment">// After</span>
call(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> ({ bla: <span class="hljs-number">1</span> })) || [];
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="preserve-lines-after-directives-2070-https-githubcom-prettier-prettier-pull-2070"></a><a href="#preserve-lines-after-directives-2070-https-githubcom-prettier-prettier-pull-2070" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preserve lines after directives (<a href="https://github.com/prettier/prettier/pull/2070">#2070</a>)</h4>
<p>By supporting TypeScript, prettier is now being used in a lot of Angular codebases which exercises edge cases that were not properly handled. In this case, we didn't preserve empty lines after directives inside of a function.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">$log, $uibModal</span>) {
    <span class="hljs-string">"ngInject"</span>;
    <span class="hljs-built_in">Object</span>.assign(<span class="hljs-keyword">this</span>, { $log, $uibModal });

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">$log, $uibModal</span>) {
    <span class="hljs-string">"ngInject"</span>;

    <span class="hljs-built_in">Object</span>.assign(<span class="hljs-keyword">this</span>, { $log, $uibModal });
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="javascript"></a><a href="#javascript" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript</h3>
<p>This release is very light in terms of JavaScript changes, which is awesome. We're starting to see the light at the end of the tunnel and get towards a great pretty printer. We're never going to get to a 100% perfect automatic pretty printer. The goal is that for every issue we get, there are no clear ways to improve the way it is printed without regressing other pieces.</p>
<h4><a class="anchor" aria-hidden="true" id="allow-jsx-lines-to-be-recombined-1831-https-githubcom-prettier-prettier-pull-1831-by-karl-https-githubcom-karl"></a><a href="#allow-jsx-lines-to-be-recombined-1831-https-githubcom-prettier-prettier-pull-1831-by-karl-https-githubcom-karl" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Allow JSX lines to be recombined (<a href="https://github.com/prettier/prettier/pull/1831">#1831</a>) by <a href="https://github.com/karl">@karl</a></h4>
<p>The goal of prettier is to have a consistent way to format your code: given an AST, we always print the same way. In two places we had to compromise and read the original format: JSX and Objects. With this change, we're no longer relying on the original input for JSX with text inside. This lets us reflow text inside of JSX.</p>
<pre><code class="hljs css language-jsx"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">const</span> Abc = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      Please state your
      {" "}
      <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      {" "}
      and
      {" "}
      <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>occupation<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      {" "}
      for the board of directors.
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">const</span> Abc = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      Please state your <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span> and <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>occupation<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span> for the board of
      directors.
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="break-on-non-literal-computed-member-expression-2087-https-githubcom-prettier-prettier-pull-2087-by-azz-https-githubcom-azz"></a><a href="#break-on-non-literal-computed-member-expression-2087-https-githubcom-prettier-prettier-pull-2087-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Break on non-literal computed member expression (<a href="https://github.com/prettier/prettier/pull/2087">#2087</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>Printing member chains is the most complicated piece of prettier and we keep finding small tweaks we can do to make it a better experience.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
nock(<span class="hljs-regexp">/test/</span>)
  .matchHeader(<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"application/json"</span>)[httpMethodNock(method)](<span class="hljs-string">"/foo"</span>)
  .reply(<span class="hljs-number">200</span>, {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span>,
  });

<span class="hljs-comment">// After</span>
nock(<span class="hljs-regexp">/test/</span>)
  .matchHeader(<span class="hljs-string">"Accept"</span>, <span class="hljs-string">"application/json"</span>)
  [httpMethodNock(method)](<span class="hljs-string">"/foo"</span>)
  .reply(<span class="hljs-number">200</span>, {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">"bar"</span>,
  });
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="indent-first-variable-in-one-var-scenario-2095-https-githubcom-prettier-prettier-pull-2095-by-azz-https-githubcom-azz"></a><a href="#indent-first-variable-in-one-var-scenario-2095-https-githubcom-prettier-prettier-pull-2095-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Indent first variable in one-var scenario (<a href="https://github.com/prettier/prettier/pull/2095">#2095</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>Up until recently we haven't done much to support printing multiple variables in a single declaration as the most common practice is to do one variable declaration per variable. For single declarations, we don't want to indent it, but it turns out that we do when there are other ones afterwards, otherwise it looks weird.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">var</span> templateTagsMapping = {
 <span class="hljs-string">'%{itemIndex}'</span>: <span class="hljs-string">'index'</span>,
 <span class="hljs-string">'%{itemContentMetaTextViews}'</span>: <span class="hljs-string">'views'</span>
},
  separator = <span class="hljs-string">'&lt;span class="item__content__meta__separator"&gt;•&lt;/span&gt;'</span>;

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">var</span> templateTagsMapping = {
   <span class="hljs-string">'%{itemIndex}'</span>: <span class="hljs-string">'index'</span>,
   <span class="hljs-string">'%{itemContentMetaTextViews}'</span>: <span class="hljs-string">'views'</span>
  },
  separator = <span class="hljs-string">'&lt;span class="item__content__meta__separator"&gt;•&lt;/span&gt;'</span>;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="allow-break-with-both-default-named-import-2096-https-githubcom-prettier-prettier-pull-2096-by-azz-https-githubcom-azz"></a><a href="#allow-break-with-both-default-named-import-2096-https-githubcom-prettier-prettier-pull-2096-by-azz-https-githubcom-azz" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Allow break with both default named import (<a href="https://github.com/prettier/prettier/pull/2096">#2096</a>) by <a href="https://github.com/azz">@azz</a></h4>
<p>This one is an unfortunate regression from 1.4 where we inlined import that only contained a single element. Turns out the definition of a single element allowed a single type and a single element. This is now corrected!</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">import</span> transformRouterContext, { type TransformedContextRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../helpers/transformRouterContext'</span>;

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">import</span> transformRouterContext, {
  type TransformedContextRouter
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../helpers/transformRouterContext'</span>;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="turn-allowimportexporteverywhere-on-2207-https-githubcom-prettier-prettier-pull-2207-by-zimme-https-githubcom-zimme"></a><a href="#turn-allowimportexporteverywhere-on-2207-https-githubcom-prettier-prettier-pull-2207-by-zimme-https-githubcom-zimme" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Turn allowImportExportEverywhere on (<a href="https://github.com/prettier/prettier/pull/2207">#2207</a>) by <a href="https://github.com/zimme">@zimme</a></h4>
<p>The goal of prettier is to format code people write in practice, so we enable loose/experimental modes for all the parsers we support. Babylon allows you to write import within a function, which is not part of the standard, but it doesn't cost us much to allow it.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
ParseError

<span class="hljs-comment">// After</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">import</span> x <span class="hljs-keyword">from</span> <span class="hljs-string">'x'</span>;
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="support-inline-template-for-new-calls-2222-https-githubcom-prettier-prettier-pull-2222"></a><a href="#support-inline-template-for-new-calls-2222-https-githubcom-prettier-prettier-pull-2222" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support inline template for new calls (<a href="https://github.com/prettier/prettier/pull/2222">#2222</a>)</h4>
<p>We keep adding features for function calls and have to backport them to new calls as they have a different AST node type but in practice we want to treat them the same. This fix refactored the two so that they are going through the same call site, so hopefully should prevent more from sneaking in.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
  formatErrorMessage<span class="hljs-string">`
    This is a really bad error.
    Which has more than one line.
  `</span>
);

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(formatErrorMessage<span class="hljs-string">`
  This is a really bad error.
  Which has more than one line.
`</span>);
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="don-t-indent-in-object-value-2227-https-githubcom-prettier-prettier-pull-2227"></a><a href="#don-t-indent-in-object-value-2227-https-githubcom-prettier-prettier-pull-2227" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Don't indent + in object value (<a href="https://github.com/prettier/prettier/pull/2227">#2227</a>)</h4>
<p>When we switched to using the same heuristic for assignment (<code>a = b</code>) for objects (<code>{a: b}</code>), we forgot to fix the indentation. Now it's fixed.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">var</span> abc = {
  <span class="hljs-attr">thing</span>:
    <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span> +
      <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span> +
      <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span>,
}

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">var</span> abc = {
  <span class="hljs-attr">thing</span>:
    <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span> +
    <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span> +
    <span class="hljs-string">"asdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdf"</span>,
}
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="handle-conditions-inside-of-a-ternary-2228-https-githubcom-prettier-prettier-pull-2228"></a><a href="#handle-conditions-inside-of-a-ternary-2228-https-githubcom-prettier-prettier-pull-2228" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handle conditions inside of a ternary (<a href="https://github.com/prettier/prettier/pull/2228">#2228</a>)</h4>
<p>Prettier already had a special case when the expression was a conditional but it didn't apply when the conditional was the left part of a ternary. Now it does.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
room = room.map(<span class="hljs-function">(<span class="hljs-params">row, rowIndex</span>) =&gt;</span>
  row.map(
    <span class="hljs-function">(<span class="hljs-params">col, colIndex</span>) =&gt;</span>
      rowIndex === <span class="hljs-number">0</span> ||
        colIndex === <span class="hljs-number">0</span> ||
        rowIndex === height ||
        colIndex === width
        ? <span class="hljs-number">1</span>
        : <span class="hljs-number">0</span>
  )
);

<span class="hljs-comment">// After</span>
room = room.map(<span class="hljs-function">(<span class="hljs-params">row, rowIndex</span>) =&gt;</span>
  row.map(
    <span class="hljs-function">(<span class="hljs-params">col, colIndex</span>) =&gt;</span>
      rowIndex === <span class="hljs-number">0</span> ||
      colIndex === <span class="hljs-number">0</span> ||
      rowIndex === height ||
      colIndex === width
        ? <span class="hljs-number">1</span>
        : <span class="hljs-number">0</span>
  )
);
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="add-caching-for-printing-2259-https-githubcom-prettier-prettier-pull-2259"></a><a href="#add-caching-for-printing-2259-https-githubcom-prettier-prettier-pull-2259" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add caching for printing (<a href="https://github.com/prettier/prettier/pull/2259">#2259</a>)</h4>
<p>With the 1.0 release, we fixed a bug in the printing that introduced an exponential behavior. We've been able to mitigate the biggest issue such that reasonable code didn't time out, but it wasn't completely fixed it. By adding a caching layer at the right spot, we should now be in the clear.</p>
<p>This should make printing the IR of prettier using prettier in debug mode no longer time out.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Before</span>
...times out...

<span class="hljs-comment">// After</span>
someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                    <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                        <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                            <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                <span class="hljs-keyword">return</span> someObject.someFunction().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                                    anotherFunction();
                                });
                            });
                        });
                    });
                });
            });
        });
    });
});
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="fix-variance-location-2261-https-githubcom-prettier-prettier-pull-2261"></a><a href="#fix-variance-location-2261-https-githubcom-prettier-prettier-pull-2261" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fix variance location (<a href="https://github.com/prettier/prettier/pull/2261">#2261</a>)</h4>
<p>We refactored the code that prints modifiers when we introduced TypeScript support and accidentally moved around the variance (<code>+</code>) part before <code>static</code> which is not valid in Flow. This is now fixed.</p>
<pre><code class="hljs css language-ts"><span class="hljs-comment">// Before</span>
<span class="hljs-keyword">class</span> Route {
  +<span class="hljs-keyword">static</span> param: T;
}

<span class="hljs-comment">// After</span>
<span class="hljs-keyword">class</span> Route {
  <span class="hljs-keyword">static</span> +param: T;
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h3>
<h4><a class="anchor" aria-hidden="true" id="various-fixes-for-range-and-cursor-tracking-2266-https-githubcom-prettier-prettier-pull-2266-2248-https-githubcom-prettier-prettier-pull-2248-2250-https-githubcom-prettier-prettier-pull-2250-2136-https-githubcom-prettier-prettier-pull-2136-by-cigit-https-githubcom-cigit-and-josephfrazier-https-githubcom-josephfrazier"></a><a href="#various-fixes-for-range-and-cursor-tracking-2266-https-githubcom-prettier-prettier-pull-2266-2248-https-githubcom-prettier-prettier-pull-2248-2250-https-githubcom-prettier-prettier-pull-2250-2136-https-githubcom-prettier-prettier-pull-2136-by-cigit-https-githubcom-cigit-and-josephfrazier-https-githubcom-josephfrazier" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Various fixes for range and cursor tracking (<a href="https://github.com/prettier/prettier/pull/2266">#2266</a>, <a href="https://github.com/prettier/prettier/pull/2248">#2248</a>, <a href="https://github.com/prettier/prettier/pull/2250">#2250</a>, <a href="https://github.com/prettier/prettier/pull/2136">#2136</a>) by <a href="https://github.com/CiGit">@CiGit</a> and <a href="https://github.com/josephfrazier">@josephfrazier</a></h4>
<p>Both those features were introduced in the last release and we discovered a bunch of issues when actually using them in production. A bunch of them got fixed, if you see more, please report them!</p>
</span></div></div><div class="blogSocialSection"><div class="blogSocialSectionItem"><a href="https://twitter.com/share" class="twitter-share-button" data-text="Prettier 1.5: GraphQL, CSS-in-JS &amp; JSON" data-url="https://prettier.io/blog/2017/06/28/1.5.0.html" data-related="true" data-show-count="false">Tweet</a></div></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"></nav></div><footer class="footerSection nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/icon.png" alt="Prettier"/></a><div><h5>Docs</h5><a href="/docs/en/index.html">About</a><a href="/docs/en/install.html">Usage</a></div><div><h5>Community</h5><a href="/en/users">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/prettier" target="_blank" rel="noopener noreferrer">Stack Overflow</a><a href="https://gitter.im/jlongster/prettier">Chat on Gitter</a><a href="https://twitter.com/PrettierCode">@PrettierCode on Twitter</a><object type="image/svg+xml" data="https://img.shields.io/twitter/follow/prettiercode.svg?label=Follow+Prettier&amp;style=social"><a href="https://twitter.com/intent/follow?screen_name=prettiercode"><img alt="Follow Prettier on Twitter" src="https://img.shields.io/twitter/follow/prettiercode.png?label=Follow+Prettier&amp;style=social"/></a></object></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/prettier/prettier">GitHub</a><a href="https://github.com/prettier/prettier/issues">Issues</a><a class="github-button" href="https://github.com/prettier/prettier" data-icon="octicon-star" data-show-count="true" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'prettier',
                inputSelector: '#search_input_react'
              });
            </script></body></html>